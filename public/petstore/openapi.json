{
  "openapi": "3.0.2",
  "info": {
    "title": "Swagger Petstore - OpenAPI 3.0",
    "description": "This is a sample health checkbased on the OpenAPI 3.0 specification. It can be extended to cover more cases for ready/liveness etc checks",
    "termsOfService": "http://swagger.io/terms/",
    "contact": { "email": "apiteam@swagger.io" },
    "license": {
      "name": "Apache 2.0",
      "url": "http://www.apache.org/licenses/LICENSE-2.0.html"
    },
    "version": "1.0.5"
  },
  "externalDocs": {
    "description": "Find out more about Swagger",
    "url": "http://swagger.io"
  },
  "servers": [{ "url": "/api/v1" }],
  "tags": [
    {
      "name": "Health",
      "description": "Everything about your health",
      "externalDocs": {
        "description": "Find out more",
        "url": "http://swagger.io"
      }
    }
  ],
  "paths": {
    "/health": {
      "get": {
        "summary": "Get health for systems that like 500 error codes",
        "description": "Reports the health back... Should it have body?",
        "operationId": "getHealth",
        "tags": ["Health"],
        "responses": {
          "200": {
            "description": "Healthy or warning?"
          },
          "500": {
            "description": "Unhealthy"
          }
        }
      }
    },
    "/healthcheck": {
      "get": {
        "tags": ["Health"],
        "summary": "Get health check",
        "description": "Reports the health back...",
        "operationId": "getHealthCheck",
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Health" },
                "examples": {
                  "ok": { "value": { "$ref": "./examples/ok.json" } },
                  "failed": { "value": { "$ref": "./examples/failed.json" } }
                }
              }
            }
          }
        },
        "security": [{ "petstore_auth": ["write:pets", "read:pets"] }]
      }
    }
  },
  "components": {
    "schemas": {
      "Health": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "enum": ["Healthy", "Warning", "Unhealthy"]
          },
          "totalDuration": {
            "type": "string",
            "format": "duration",
            "description": "Duration, should proably put a regex in here"
          },
          "entries": {
            "type": "object",
            "additionalProperties": {
              "$ref": "#/components/schemas/Entry"
            }
          }
        }
      },
      "Entry": {
        "type": "object",
        "description": "Name of the healthcheck",
        "required": ["data", "duration", "status", "tags"],
        "properties": {
          "data": { "type": "object" },
          "duration": { "type": "string" },
          "status": { "type": "string" },
          "tags": { "type": "array", "items": { "type": "string" } }
        }
      }
    },
    "securitySchemes": {
      "petstore_auth": {
        "type": "oauth2",
        "flows": {
          "implicit": {
            "authorizationUrl": "https://petstore3.swagger.io/oauth/authorize",
            "scopes": {
              "write:pets": "modify pets in your account",
              "read:pets": "read your pets"
            }
          }
        }
      },
      "api_key": { "type": "apiKey", "name": "api_key", "in": "header" }
    }
  }
}
